(()=>{"use strict";var e,t,r,n,s={44(e,t,r){var n=r(70),s=r(758),l=r(576),i=r(305),a=r(809),o=r(878),c=r(1),d=r.n(c);r(382);let u="cache",p=".local/share/pnpm/store";function f(){return new Promise((e,t)=>{let r=indexedDB.open("pnpm-store-cache",6);r.onerror=()=>t(r.error),r.onsuccess=()=>e(r.result),r.onupgradeneeded=e=>{let t=e.target.result;t.objectStoreNames.contains("files")&&t.deleteObjectStore("files"),t.objectStoreNames.contains("cache")&&t.deleteObjectStore("cache"),t.createObjectStore(u)}})}async function m(e){let t=new Blob([e]).stream().pipeThrough(new CompressionStream("gzip")),r=[],n=t.getReader();for(;;){let{done:e,value:t}=await n.read();if(e)break;r.push(t)}let s=new Uint8Array(r.reduce((e,t)=>e+t.length,0)),l=0;for(let e of r)s.set(e,l),l+=e.length;return s}async function g(e){let t=new Blob([e]).stream().pipeThrough(new DecompressionStream("gzip")),r=[],n=t.getReader();for(;;){let{done:e,value:t}=await n.read();if(e)break;r.push(t)}let s=new Uint8Array(r.reduce((e,t)=>e+t.length,0)),l=0;for(let e of r)s.set(e,l),l+=e.length;return s}async function x(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=[];try{for(let s of(await e.fs.readdir(t,{withFileTypes:!0}))){let l=t+"/"+s.name,i=r?r+"/"+s.name:s.name;if(s.isDirectory()){let t=await x(e,l,i);n.push(...t)}else if(s.isFile())try{let t=await e.fs.readFile(l);n.push({path:i,contents:t})}catch{}}}catch{}return n}async function b(e,t){null==t||t("开始保存 pnpm store 缓存..."),null==t||t(`pnpm store 路径: ${p}`),null==t||t("正在读取 pnpm store 文件...");let r=await x(e,p);if(0===r.length){null==t||t("没有找到需要缓存的文件");return}null==t||t(`读取到 ${r.length} 个文件，正在序列化...`);let n=function(e){let t=new TextEncoder,r=4;for(let n of e)r+=4+t.encode(n.path).length+4+n.contents.length;let n=new Uint8Array(r),s=new DataView(n.buffer),l=0;for(let r of(s.setUint32(l,e.length,!0),l+=4,e)){let e=t.encode(r.path);s.setUint32(l,e.length,!0),l+=4,n.set(e,l),l+=e.length,s.setUint32(l,r.contents.length,!0),l+=4,n.set(r.contents,l),l+=r.contents.length}return n}(r);null==t||t(`序列化完成 (${(n.length/1024/1024).toFixed(2)}MB)，正在压缩...`);let s=await m(n),l=((1-s.length/n.length)*100).toFixed(1);null==t||t(`压缩完成: ${(n.length/1024/1024).toFixed(2)}MB -> ${(s.length/1024/1024).toFixed(2)}MB (节省 ${l}%)`),null==t||t("正在保存到 IndexedDB...");let i=await f(),a=i.transaction(u,"readwrite"),o=a.objectStore(u);await new Promise((e,t)=>{let r=o.put(s,"pnpm-store");r.onsuccess=()=>e(),r.onerror=()=>t(r.error)}),await new Promise((e,t)=>{a.oncomplete=()=>e(),a.onerror=()=>t(a.error)}),i.close(),null==t||t(`已缓存 ${r.length} 个文件`)}async function h(e,t){let r=[],n=0;async function s(){for(;n<e.length;){let t=n++;r[t]=await e[t]()}}let l=Array(Math.min(t,e.length)).fill(null).map(()=>s());return await Promise.all(l),r}async function w(e,t){null==t||t("正在检查 pnpm store 缓存...");let r=await f(),n=r.transaction(u,"readonly").objectStore(u),s=await new Promise((e,t)=>{let r=n.get("pnpm-store");r.onsuccess=()=>e(r.result),r.onerror=()=>t(r.error)});if(r.close(),!s)return null==t||t("没有找到缓存"),!1;null==t||t(`找到缓存 (${(s.length/1024/1024).toFixed(2)}MB)，正在解压...`);let l=function(e){let t=new TextDecoder,r=new DataView(e.buffer,e.byteOffset,e.byteLength),n=[],s=0,l=r.getUint32(s,!0);s+=4;for(let i=0;i<l;i++){let l=r.getUint32(s,!0);s+=4;let i=e.slice(s,s+l),a=t.decode(i);s+=l;let o=r.getUint32(s,!0);s+=4;let c=e.slice(s,s+o);s+=o,n.push({path:a,contents:c})}return n}(await g(s));null==t||t(`正在恢复 ${l.length} 个缓存文件...`);let i=new Set;for(let e of l){let t=e.path.split("/"),r=p;for(let e=0;e<t.length-1;e++)r+="/"+t[e],i.add(r)}for(let t of Array.from(i).sort((e,t)=>e.split("/").length-t.split("/").length))try{await e.fs.mkdir(t,{recursive:!0})}catch{}let a=l.map(t=>async()=>{let r=`${p}/${t.path}`;await e.fs.writeFile(r,t.contents)});return await h(a,50),null==t||t(`已恢复 ${l.length} 个缓存文件`),!0}let y=[{name:"React",type:"react",extensions:[".jsx",".tsx"],baseDeps:["react","react-dom","react/jsx-runtime","tailwindcss","postcss","autoprefixer"],defaultDeps:["react","react-dom","tailwindcss"],createFiles(e,t,r){let n=t.endsWith(".tsx"),s=t.replace(/\.(jsx|tsx)$/,""),l={react:"^18.2.0","react-dom":"^18.2.0"};r.forEach(e=>{l[e]="latest"});let i={"@rsbuild/core":"^1.0.0","@rsbuild/plugin-react":"^1.0.0","@rspack/binding-wasm32-wasi":"^1.0.0",tailwindcss:"^3.4.0",postcss:"^8.4.0",autoprefixer:"^10.4.0",...n?{typescript:"^5.3.0","@types/react":"^18.2.0","@types/react-dom":"^18.2.0"}:{}},a=`import { defineConfig } from '@rsbuild/core';
import { pluginReact } from '@rsbuild/plugin-react';

export default defineConfig({
  plugins: [pluginReact()],
});`,o=`/** @type {import('tailwindcss').Config} */
export default {
  content: ['./src/**/*.{js,jsx,ts,tsx}'],
  theme: {
    extend: {},
  },
  plugins: [],
};`,c=`export default {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
};`,d=`@tailwind base;
@tailwind components;
@tailwind utilities;`,u=`import React from 'react';
import ReactDOM from 'react-dom/client';
import './index.css';
import ${s} from './${t}';

ReactDOM.createRoot(document.getElementById('root')!).render(
  <React.StrictMode>
    <${s} />
  </React.StrictMode>
);`;return{"package.json":{file:{contents:JSON.stringify({name:"react-preview",type:"module",scripts:{dev:"rsbuild dev",build:"rsbuild build",preview:"rsbuild preview"},dependencies:l,devDependencies:i},null,2)}},".npmrc":{file:{contents:"store-dir=.local/share/pnpm/store"}},"rsbuild.config.mjs":{file:{contents:a}},"tailwind.config.js":{file:{contents:o}},"postcss.config.mjs":{file:{contents:c}},src:{directory:{"index.tsx":{file:{contents:u}},"index.css":{file:{contents:d}},[t]:{file:{contents:e}}}}}},getEditorLanguage:e=>e.endsWith(".tsx")?"typescript":"javascript"},{name:"Vue 3",type:"vue",extensions:[".vue"],baseDeps:["vue","tailwindcss","postcss","autoprefixer"],defaultDeps:["vue","tailwindcss"],createFiles(e,t,r){let n=t.replace(/\.vue$/,""),s={vue:"^3.4.0"};r.forEach(e=>{s[e]="latest"});let l=`import { defineConfig } from '@rsbuild/core';
import { pluginVue } from '@rsbuild/plugin-vue';

export default defineConfig({
  plugins: [pluginVue()],
});`,i=`/** @type {import('tailwindcss').Config} */
export default {
  content: ['./src/**/*.{js,ts,vue}'],
  theme: {
    extend: {},
  },
  plugins: [],
};`,a=`export default {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
};`,o=`@tailwind base;
@tailwind components;
@tailwind utilities;`,c=`import { createApp } from 'vue';
import './index.css';
import ${n} from './${t}';

createApp(${n}).mount('#root');`;return{"package.json":{file:{contents:JSON.stringify({name:"vue-preview",type:"module",scripts:{dev:"rsbuild dev",build:"rsbuild build",preview:"rsbuild preview"},dependencies:s,devDependencies:{"@rsbuild/core":"^1.0.0","@rsbuild/plugin-vue":"^1.0.0","@rspack/binding-wasm32-wasi":"^1.0.0",tailwindcss:"^3.4.0",postcss:"^8.4.0",autoprefixer:"^10.4.0"}},null,2)}},".npmrc":{file:{contents:"store-dir=.local/share/pnpm/store"}},"rsbuild.config.mjs":{file:{contents:l}},"tailwind.config.js":{file:{contents:i}},"postcss.config.mjs":{file:{contents:a}},src:{directory:{"index.js":{file:{contents:c}},"index.css":{file:{contents:o}},[t]:{file:{contents:e}}}}}},getEditorLanguage:e=>"html"},{name:"Svelte",type:"svelte",extensions:[".svelte"],baseDeps:["svelte","tailwindcss","postcss","autoprefixer"],defaultDeps:["svelte","tailwindcss"],createFiles(e,t,r){let n=t.replace(/\.svelte$/,""),s={};r.forEach(e=>{s[e]="latest"});let l={name:"svelte-preview",type:"module",scripts:{dev:"rsbuild dev",build:"rsbuild build",preview:"rsbuild preview"},dependencies:Object.keys(s).length>0?s:void 0,devDependencies:{"@rsbuild/core":"^1.0.0","@rsbuild/plugin-svelte":"^1.0.0","@rspack/binding-wasm32-wasi":"^1.0.0",svelte:"^4.2.0",tailwindcss:"^3.4.0",postcss:"^8.4.0",autoprefixer:"^10.4.0"}};l.dependencies||delete l.dependencies;let i=`import { defineConfig } from '@rsbuild/core';
import { pluginSvelte } from '@rsbuild/plugin-svelte';

export default defineConfig({
  plugins: [pluginSvelte()],
});`,a=`/** @type {import('tailwindcss').Config} */
export default {
  content: ['./src/**/*.{html,js,svelte}'],
  theme: {
    extend: {},
  },
  plugins: [],
};`,o=`export default {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
};`,c=`@tailwind base;
@tailwind components;
@tailwind utilities;`,d=`import './index.css';
import ${n} from './${t}';

const app = new ${n}({
  target: document.getElementById('root'),
});

export default app;`;return{"package.json":{file:{contents:JSON.stringify(l,null,2)}},".npmrc":{file:{contents:"store-dir=.local/share/pnpm/store"}},"rsbuild.config.mjs":{file:{contents:i}},"tailwind.config.js":{file:{contents:a}},"postcss.config.mjs":{file:{contents:o}},src:{directory:{"index.js":{file:{contents:d}},"index.css":{file:{contents:c}},[t]:{file:{contents:e}}}}}},getEditorLanguage:e=>"html"}];function v(e){if(e.startsWith(".")||e.startsWith("/"))return null;if(e.startsWith("@")){let t=e.split("/");return t.length>=2?`${t[0]}/${t[1]}`:null}return e.split("/")[0]}y.flatMap(e=>e.extensions);let j=null,N=!1;async function S(){if(j)return j;if(N){for(;N;)await new Promise(e=>setTimeout(e,100));if(j)return j}N=!0;try{return j=await i.iM.boot()}finally{N=!1}}let $=null,k=null;l.createRoot(document.getElementById("root")).render((0,n.jsx)(s.StrictMode,{children:(0,n.jsx)(()=>{let[e,t]=(0,s.useState)("idle"),[r,l]=(0,s.useState)("等待接收代码..."),[i,c]=(0,s.useState)([]),[u,p]=(0,s.useState)(null),[f,m]=(0,s.useState)(null),[g,x]=(0,s.useState)(!1),[h,j]=(0,s.useState)(""),[N,C]=(0,s.useState)(!1),[O,R]=(0,s.useState)(!1),[F,D]=(0,s.useState)(!1),[E,T]=(0,s.useState)("组件"),[U,M]=(0,s.useState)(!1),L=(0,s.useRef)(null),W=(0,s.useRef)(null),B=(0,s.useRef)(null),A=(0,s.useRef)(null),I=(0,s.useRef)(!1),P=(0,s.useRef)(null),J=(0,s.useRef)(null),_=(0,s.useCallback)(e=>{$&&($.write(e.replace(/\n/g,"\r\n")),$.scrollToBottom())},[]),V=(0,s.useCallback)((e,r)=>{t(e),l(r)},[]),z=(0,s.useCallback)(e=>{c(t=>t.map(t=>({...t,status:e})))},[]),q=(0,s.useCallback)(()=>{P.current&&(P.current.src=P.current.src)},[]),H=(0,s.useCallback)(async()=>{let e=B.current;if(e){M(!0),_("\n[下载] 正在打包项目文件...\n");try{let t=new(d()),r=async(t,n)=>{for(let s of(await e.fs.readdir(t,{withFileTypes:!0}))){let l="/"===t?`/${s.name}`:`${t}/${s.name}`;if("node_modules"!==s.name&&".pnpm-store"!==s.name)if(s.isDirectory()){let e=n.folder(s.name);e&&await r(l,e)}else try{let t=await e.fs.readFile(l);if("package.json"===s.name){let e=new TextDecoder().decode(t),r=JSON.parse(e);r.dependencies&&delete r.dependencies["@rspack/binding-wasm32-wasi"],r.devDependencies&&delete r.devDependencies["@rspack/binding-wasm32-wasi"],n.file(s.name,JSON.stringify(r,null,2))}else n.file(s.name,t)}catch(e){console.warn(`跳过文件: ${l}`,e)}}};await r("/",t);let n=await t.generateAsync({type:"blob"}),s=URL.createObjectURL(n),l=document.createElement("a");l.href=s,l.download=`${E.toLowerCase().replace(/\s+/g,"-")}-project.zip`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(s),_("[下载] 项目打包完成!\n")}catch(e){console.error("下载失败:",e),_(`[下载] 打包失败: ${e instanceof Error?e.message:"未知错误"}
`)}finally{M(!1)}}},[E,_]),K=(0,s.useCallback)(async e=>{let t=await e.spawn("jsh",{terminal:{cols:80,rows:20}});return t.output.pipeTo(new WritableStream({write:e=>{$&&$.write(e)}})),A.current=t.input.getWriter(),C(!0),t},[]),G=(0,s.useCallback)(()=>{A.current&&h.trim()&&(A.current.write(h+"\n"),j(""))},[h]);(0,s.useEffect)(()=>{let e=L.current;if(!e)return;if(k&&(clearTimeout(k),k=null),$){e.querySelector(".xterm")||$.open(e),x(!0);return}let t=new a.Terminal({theme:{background:"#1e1e1e",foreground:"#d4d4d4",cursor:"#d4d4d4"},fontSize:13,fontFamily:"'SF Mono', 'Fira Code', Consolas, monospace",cursorBlink:!1,disableStdin:!0,cols:80,rows:20,scrollback:1e3});t.open(e),$=t;let r=setTimeout(()=>{x(!0)},50);return()=>{clearTimeout(r),k=setTimeout(()=>{$===t&&(t.dispose(),$=null),k=null},100)}},[]),(0,s.useEffect)(()=>{if(!g||I.current)return;I.current=!0;let e=function(){let e=window.location.hash;if(!e||e.length<2)return null;try{let t=e.substring(1);if(t.startsWith("c=")){let e=t.substring(2),r=(0,o.decompressFromEncodedURIComponent)(e);if(!r)return console.error("Failed to decompress code from URL"),null;return{data:JSON.parse(r),isUrlMode:!0}}let r=localStorage.getItem(t);if(!r)return null;return window.addEventListener("beforeunload",()=>{localStorage.removeItem(t)}),{data:JSON.parse(r),isUrlMode:!1}}catch(e){return console.error("Failed to get code from hash:",e),null}}();if(!e||!e.data.code){m("未能接收到代码，请关闭此窗口并重新点击预览按钮"),V("error","未收到代码");return}let{data:t,isUrlMode:r}=e,n=!!window.opener,s=document.referrer&&document.referrer.startsWith(window.location.origin);(n||s)&&R(!0),D(r),_(`收到代码: ${t.fileName}

`),Q(t.code,t.fileName)},[g]),(0,s.useEffect)(()=>{let e=async e=>{var t;if((null==(t=e.data)?void 0:t.type)!=="code-update")return;let{code:r,fileName:n}=e.data;if(r&&n&&B.current)try{await B.current.fs.writeFile(`/src/${n}`,r),_(`[HMR] 代码已更新: ${n}
`)}catch(e){console.error("Failed to update code:",e)}};return window.addEventListener("message",e),()=>window.removeEventListener("message",e)},[_]);let Q=async(e,t)=>{let r=function(e){let t=e.toLowerCase();for(let e of y)if(e.extensions.some(e=>t.endsWith(e)))return{type:e.type,adapter:e};return null}(t);if(!r){m(`不支持的文件类型: ${t}`),V("error","不支持的文件类型");return}let{adapter:n}=r;J.current=n,T(n.name),V("booting","正在分析依赖...");let s=function(e,t){let r,n=new Set,s=/\bfrom\s+['"]([^'"]+)['"]/g,l=/\bimport\s+['"]([^'"]+)['"]/g;for(;null!==(r=s.exec(e));){let e=v(r[1]);e&&n.add(e)}for(;null!==(r=l.exec(e));){let e=v(r[1]);e&&n.add(e)}let i=/\brequire\s*\(\s*['"]([^'"]+)['"]\s*\)/g;for(;null!==(r=i.exec(e));){let e=v(r[1]);e&&n.add(e)}return Array.from(n).filter(e=>!t.includes(e))}(e,n.baseDeps),l=[...n.defaultDeps,...s];if(_(`检测到框架: ${n.name}
`),_("分析代码依赖...\n"),_(`默认依赖: ${n.defaultDeps.join(", ")}
`),s.length>0&&_(`额外依赖: ${s.join(", ")}
`),_("\n"),c(l.map(e=>({name:e,status:"pending"}))),!window.crossOriginIsolated&&(V("booting","等待跨域隔离环境..."),await new Promise(e=>setTimeout(e,2e3)),!window.crossOriginIsolated)){m("浏览器环境不支持 WebContainers，请刷新页面重试"),V("error","环境不支持");return}try{V("booting","正在启动 WebContainer..."),_("启动 WebContainer...\n");let r=await S();B.current=r,_("WebContainer 已启动\n\n"),V("booting","正在清理旧文件...");try{for(let e of(await r.fs.readdir("/")))await r.fs.rm(`/${e}`,{recursive:!0})}catch{}let l=n.createFiles(e,t,s);V("booting","正在创建项目文件..."),await r.mount(l),_("项目文件已创建\n\n"),await w(r,e=>{_(e+"\n")})&&_("\n"),V("installing","正在安装依赖..."),z("installing"),_("$ pnpm install\n");let i=await r.spawn("pnpm",["install"]);i.output.pipeTo(new WritableStream({write:e=>_(e)}));let a=await i.exit;if(0!==a)throw Error("依赖安装失败");z("installed"),_("\n"),b(r,e=>{console.log("[缓存]",e)}).catch(e=>{console.error("保存 pnpm store 缓存失败:",e)}),V("running","正在启动开发服务器..."),_("$ pnpm run dev\n"),(await r.spawn("pnpm",["run","dev"])).output.pipeTo(new WritableStream({write:e=>_(e)})),r.on("server-ready",async(e,t)=>{V("running","开发服务器已启动"),p(t),await K(r)})}catch(e){console.error(e),m(e instanceof Error?e.message:"启动失败"),V("error","启动失败")}};return(0,n.jsxs)("div",{className:"flex flex-col min-h-screen bg-[#1e1e1e] text-white font-sans",children:[(0,n.jsxs)("header",{className:"flex items-center justify-between px-4 py-3 bg-[#2d2d2d] border-b border-[#404040]",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsxs)("h1",{className:"text-sm font-medium",children:[E," 组件预览"]}),(0,n.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[(0,n.jsx)("div",{className:`w-2 h-2 rounded-full ${(()=>{switch(e){case"booting":case"installing":return"bg-amber-500";case"running":return"bg-emerald-500";case"error":return"bg-red-500";default:return"bg-gray-500"}})()}`}),(0,n.jsx)("span",{children:r})]})]}),(0,n.jsx)("button",{onClick:H,disabled:!u||U,className:"px-3 py-1.5 text-xs bg-blue-600 text-white rounded hover:bg-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-1.5",children:U?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"w-3 h-3 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"打包中..."]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"下载项目"]})})]}),O&&(0,n.jsx)("div",{className:`px-4 py-2 border-b text-xs ${F?"bg-blue-900/50 border-blue-800 text-blue-200":"bg-amber-900/50 border-amber-800 text-amber-200"}`,children:F?"可以直接复制当前页面 URL 分享给他人。注意：分享后的代码更新不会同步，如需更新请重新分享新的链接":"文件内容过大，无法通过 URL 分享"}),(0,n.jsxs)("main",{className:"flex flex-1 min-h-0",children:[(0,n.jsxs)("div",{className:"w-[400px] flex flex-col bg-[#1e1e1e] border-r border-[#404040]",children:[(0,n.jsxs)("div",{className:"border-b border-[#404040]",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between px-3 py-2 bg-[#2d2d2d] border-b border-[#404040]",children:[(0,n.jsx)("span",{className:"text-xs text-gray-400",children:"依赖"}),(0,n.jsx)("span",{className:"px-2 py-0.5 text-[10px] bg-blue-500 text-white rounded-full",children:i.length})]}),(0,n.jsx)("div",{className:"px-3 py-2 max-h-[150px] overflow-auto",children:0===i.length?(0,n.jsx)("div",{className:"text-xs text-gray-500",children:"没有额外依赖"}):i.map(e=>(0,n.jsxs)("div",{className:"flex items-center gap-2 py-1 text-xs font-mono",children:[(0,n.jsx)("span",{className:"text-blue-400",children:e.name}),(0,n.jsx)("span",{className:`ml-auto px-2 py-0.5 rounded text-[10px] ${(e=>{switch(e){case"pending":return"bg-gray-700 text-gray-400";case"installing":return"bg-amber-900 text-amber-400";case"installed":return"bg-emerald-900 text-emerald-400"}})(e.status)}`,children:(e=>{switch(e){case"pending":return"待安装";case"installing":return"安装中";case"installed":return"已安装"}})(e.status)})]},e.name))})]}),(0,n.jsxs)("div",{className:"flex flex-col flex-1 min-h-0",children:[(0,n.jsx)("div",{className:"px-3 py-2 bg-[#2d2d2d] border-b border-[#404040]",children:(0,n.jsx)("span",{className:"text-xs text-gray-400",children:"终端"})}),(0,n.jsx)("div",{ref:L,className:"flex-1 overflow-hidden"}),(0,n.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 bg-[#2d2d2d] border-t border-[#404040]",children:[(0,n.jsx)("span",{className:"text-xs text-gray-500",children:"$"}),(0,n.jsx)("input",{ref:W,type:"text",value:h,onChange:e=>j(e.target.value),onKeyDown:e=>{"Enter"===e.key&&G()},placeholder:N?"输入命令...":"等待 Shell 启动...",disabled:!N,className:"flex-1 bg-transparent text-sm text-gray-200 placeholder-gray-600 outline-none font-mono disabled:opacity-50"}),(0,n.jsx)("button",{onClick:G,disabled:!N||!h.trim(),className:"px-3 py-1 text-xs bg-blue-600 text-white rounded hover:bg-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"执行"})]})]})]}),(0,n.jsxs)("div",{className:"flex flex-col flex-1",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between px-3 py-2 bg-[#2d2d2d] border-b border-[#404040]",children:[(0,n.jsx)("span",{className:"text-xs text-gray-400",children:"预览"}),u&&(0,n.jsx)("button",{onClick:q,className:"px-2 py-1 text-xs text-gray-300 hover:text-white hover:bg-[#404040] rounded transition-colors",title:"刷新预览",children:"刷新"})]}),(0,n.jsx)("div",{className:"flex-1 relative",children:f?(0,n.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,n.jsx)("div",{className:"text-red-500 text-center px-5",children:f})}):u?(0,n.jsx)("iframe",{ref:P,src:u,className:"w-full h-full border-none bg-white"}):(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center h-full gap-4",children:[(0,n.jsx)("div",{className:"w-8 h-8 border-3 border-[#404040] border-t-blue-500 rounded-full animate-spin"}),(0,n.jsx)("div",{className:"text-gray-400",children:r})]})})]})]})]})},{})}))}},l={};function i(e){var t=l[e];if(void 0!==t)return t.exports;var r=l[e]={id:e,loaded:!1,exports:{}};return s[e](r,r.exports,i),r.loaded=!0,r.exports}i.m=s,i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.g=(()=>{if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}})(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),e=[],i.O=(t,r,n,s)=>{if(r){s=s||0;for(var l=e.length;l>0&&e[l-1][2]>s;l--)e[l]=e[l-1];e[l]=[r,n,s];return}for(var a=1/0,l=0;l<e.length;l++){for(var[r,n,s]=e[l],o=!0,c=0;c<r.length;c++)(!1&s||a>=s)&&Object.keys(i.O).every(e=>i.O[e](r[c]))?r.splice(c--,1):(o=!1,s<a&&(a=s));if(o){e.splice(l--,1);var d=n();void 0!==d&&(t=d)}}return t},t={153:0,649:0},i.O.j=e=>0===t[e],r=(e,r)=>{var n,s,[l,a,o]=r,c=0;if(l.some(e=>0!==t[e])){for(n in a)i.o(a,n)&&(i.m[n]=a[n]);if(o)var d=o(i)}for(e&&e(r);c<l.length;c++)s=l[c],i.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return i.O(d)},(n=self.webpackChunklark_codesandbox_plugin=self.webpackChunklark_codesandbox_plugin||[]).forEach(r.bind(null,0)),n.push=r.bind(null,n.push.bind(n));var a=i.O(void 0,["783","360","649"],()=>i(44));a=i.O(a)})();